<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mycompany.webapp.dao.ProductReviewsDao">
<select id="prSelectAll" resultType="productreviews">
	select boardno, userid, productno, btitle, bcontent, bdate, borgimg, bsaveimg, bimgtype
	from productreviews
	order by boardno desc
</select>

<select id="prSelectByPno" parameterType="int" resultType="productreviews">
	select p.productno, pr.boardno, pr.userid, pr.btitle, pr.bcontent, pr.bdate, pr.borgimg, pr.bsaveimg, pr.bimgtype
	from products p, productreviews pr
	where p.productno=pr.productno and p.productno=#{productno}
	order by boardno desc
</select>

<insert id="prInsert" parameterType="productreviews">
	insert into productreviews
	(boardno, userid, productno, btitle, bcontent, bdate, borgimg, bsaveimg, bimgtype)
	values
	(seq_boardno.nextval, #{userid}, #{productno}, #{btitle}, #{bcontent}, sysdate, #{borgimg}, #{bsaveimg}, #{bimgtype})
</insert>

<update id="prUpdate" parameterType="productreviews">
	update productreviews set
	btitle=#{btitle}, 
	bcontent=#{bcontent}, 
	borgimg=#{borgimg}, 
	bsaveimg=#{bsaveimg}, 
	bimgtype=#{bimgtype}
	where boardno=#{boardno}
</update>
	
	<delete id="prDelete" parameterType="int">
		delete from productreviews where boardno=#{boardno}
	</delete>
</mapper>